---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const recommendations = await getCollection('recommendations');
const sortedRecommendations = recommendations.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Recommendations | David Garibay" description="What colleagues and managers say about working with me">
  <div class="min-h-screen py-24 px-6">
    <div class="container mx-auto max-w-5xl">
      <div class="text-center mb-16">
        <h1 class="text-4xl md:text-6xl font-bold mb-4">Recommendations</h1>
        <p class="text-text-secondary text-lg md:text-xl">What colleagues and managers say about working with me</p>
      </div>

      <div class="grid gap-8 md:grid-cols-2">
        {sortedRecommendations.map(async (rec) => {
          const { Content } = await rec.render();
          return (
            <article class="bg-zen-bg-secondary rounded-lg p-8 border border-zen-subtle hover:border-zen-coral/30 transition-colors">
              <div class="mb-6">
                <svg class="w-8 h-8 text-zen-coral mb-4" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z" />
                </svg>

                <div class="prose prose-invert max-w-none text-text-primary mb-6">
                  <Content />
                </div>
              </div>

              <div class="border-t border-zen-subtle pt-4">
                <a
                  href={rec.data.linkedin}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="block hover:text-zen-coral transition-colors"
                >
                  <p class="font-semibold text-text-primary">{rec.data.name}</p>
                  <p class="text-text-secondary text-sm">{rec.data.title}</p>
                  <p class="text-text-tertiary text-sm">{rec.data.company}</p>
                </a>
              </div>
            </article>
          );
        })}
      </div>
    </div>
  </div>
</BaseLayout>
